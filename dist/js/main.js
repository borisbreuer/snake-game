!function(t){var e={};function r(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=e,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(i,o,function(e){return t[e]}.bind(null,o));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";r.r(e);const i=document.querySelector("canvas"),o=i.getContext("2d"),n=(t,e)=>Math.random()*(e-t)+t;let s=0,l=0;const a=()=>({x:20*Math.floor(n(0,i.width/20)),y:20*Math.floor(n(0,i.height/20))});class d{constructor(t,e,r,i){this.offset=2,this.x=t,this.y=e,this.r=r-this.offset,this.color=i,this.vel={x:2*(this.r+this.offset),y:2*(this.r+this.offset)},this.alpha=1,this.snake=[],this.bodyLength=0,this.dirVal=""}draw(){for(let t=0;t<this.snake.length;t++){this.snake.length;let e=0==t%2?[0,100,0]:[0,150,0],r=this.snake[t];o.fillStyle=`rgba(${e},1)`,o.lineWidth=1,o.strokeStyle="rgba(0,200,0, 1)",o.beginPath(),o.arc(r.x+this.r+this.offset,r.y+this.r+this.offset,this.r-2,0,2*Math.PI,!1),o.stroke(),o.fill(),o.closePath()}o.fillStyle=`rgba(20,200,20, ${this.alpha})`,o.lineWidth=1,o.strokeStyle="rgba(0,100,0, 1)",o.beginPath(),o.arc(this.x+this.r+this.offset,this.y+this.r+this.offset,this.r,0,2*Math.PI,!1),o.stroke(),o.fill(),o.closePath()}update(){this.bodyLength>0&&this.createBody(),this.move(),this.draw()}move(){"LEFT"==this.dirVal&&"RIGHT"!=this.dirVal?this.x-=this.vel.x:"UP"==this.dirVal&&"DOWN"!=this.dirVal?this.y-=this.vel.y:"RIGHT"==this.dirVal&&"LEFT"!=this.dirVal?this.x+=this.vel.x:"DOWN"==this.dirVal&&"UP"!=this.dirVal?this.y+=this.vel.y:this.dirVal}createBody(){"STOP"!=this.dirVal&&(this.snake.length>=this.bodyLength&&this.snake.splice(0,1),this.snake.push({x:this.x,y:this.y}))}addBody(){this.bodyLength+=1}tailCollision(){for(let t=0;t<this.snake.length;t++)if(this.x==this.snake[t].x&&this.y==this.snake[t].y&&t!=this.snake.length-1)return!0;return!1}borderCollision(){return this.x<0||this.x>=i.width||this.y<0||this.y>=i.height}}i.width=600,i.height=600;let h,u,c,f,y,g,b,p,w,v,m="RUN",L=document.querySelector("#scoreEl");const x=()=>clearInterval(h),S=()=>{h=setInterval(()=>{"PAUSE"==m?((()=>{o.save(),o.font="bold 72px Arial";let t=o.measureText("Pause ...").width/2,e=o.createLinearGradient(i.width/2-t,0,i.width/2+t,0);e.addColorStop("0","rgb(0, 200, 0)"),e.addColorStop("0.5","rgb(255, 127, 0)"),e.addColorStop("1","rgb(0, 200, 0)"),o.shadowColor="black",o.shadowBlur=15,o.fillStyle=e,o.lineWidth=2,o.fillText("Pause ...",i.width/2-t,i.height/2+20),o.restore()})(),x()):"RUN"==m&&((()=>{o.fillStyle="rgb(200,127,50)",o.fillRect(0,0,i.width,i.height);let t="rgba(200,50,30,0.3)";for(let e=0;e<i.width;e++){for(let r=0;r<i.height;r++)(s%2==0&&l%2==1||s%2==1&&l%2==0)&&(o.fillStyle=t,o.fillRect(20*e,20*r,20,20)),l++;s++}})(),f.update(),f.x==u.x&&f.y==u.y&&(u=a(),f.addBody(),y+=b,b=v,L.textContent=y),(t=>{o.fillStyle="rgb(255,10,10)",o.fillRect(t.x+2,t.y+2,16,16)})(u)),(f.tailCollision()||f.borderCollision())&&(m="STOP",(()=>{o.save(),o.font="bold 72px Arial";let t=o.measureText("Game Over").width/2,e=o.createLinearGradient(i.width/2-t,0,i.width/2+t,0);e.addColorStop("0","rgb(0, 200, 0)"),e.addColorStop("0.5","rgb(255, 127, 0)"),e.addColorStop("1","rgb(0, 200, 0)"),o.shadowColor="black",o.shadowBlur=15,o.fillStyle=e,o.lineWidth=2,o.fillText("Game Over".toLocaleUpperCase(),i.width/2-t,i.height/2+20),o.restore()})(),x())},g)},k=()=>{x(),m="RUN",y=0,v=45,w=5,p=5,b=v,g=100,L.textContent=y,u=a(),c=a(),f=new d(c.x,c.y,10,[200,200,200]),S()};k(),document.addEventListener("keydown",(function(t){"ArrowLeft"!=t.key&&"ArrowUp"!=t.key&&"ArrowRight"!=t.key&&"ArrowDown"!=t.key||b>w&&(b-=p),"ArrowLeft"==t.key&&"RIGHT"!=f.dirVal?f.dirVal="LEFT":"ArrowUp"==t.key&&"DOWN"!=f.dirVal?f.dirVal="UP":"ArrowRight"==t.key&&"LEFT"!=f.dirVal?f.dirVal="RIGHT":"ArrowDown"==t.key&&"UP"!=f.dirVal?f.dirVal="DOWN":" "!=t.key&&"p"!=t.key.toLocaleLowerCase()||"RUN"!=m?" "!=t.key&&"p"!=t.key.toLocaleLowerCase()||"PAUSE"!=m?"s"==t.key.toLocaleLowerCase()&&"STOP"==m&&(k(),f.dirVal="STOP"):(m="RUN",S()):m="PAUSE"}),!1);const E=t=>{t.preventDefault(),"DOWN"!=f.dirVal&&(f.dirVal="UP")},P=t=>{t.preventDefault(),"RIGHT"!=f.dirVal&&(f.dirVal="LEFT")},V=t=>{t.preventDefault(),"UP"!=f.dirVal&&(f.dirVal="DOWN")},T=t=>{t.preventDefault(),"LEFT"!=f.dirVal&&(f.dirVal="RIGHT")},O=t=>{t.preventDefault(),"STOP"==m&&(k(),f.dirVal="STOP")},U=t=>{t.preventDefault(),"RUN"==m?m="PAUSE":"PAUSE"==m&&(S(),m="RUN")},C=document.getElementById("btn_up");C.addEventListener("touchstart",E,!1),C.addEventListener("mousedown",E,!1);const R=document.getElementById("btn_left");R.addEventListener("touchstart",P,!1),R.addEventListener("mousedown",P,!1);const I=document.getElementById("btn_down");I.addEventListener("touchstart",V,!1),I.addEventListener("mousedown",V,!1);const A=document.getElementById("btn_right");A.addEventListener("touchstart",T,!1),A.addEventListener("mousedown",T,!1);const D=document.getElementById("btn_start");D.addEventListener("touchstart",O,!1),D.addEventListener("mousedown",O,!1);const N=document.getElementById("btn_pause");N.addEventListener("touchstart",U,!1),N.addEventListener("mousedown",U,!1)}]);